<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jeu de Strat√©gie</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
    .fade-in { animation: fadeIn 1s ease-in forwards; opacity: 0; }
    @keyframes fadeIn { to { opacity: 1; } }
</style>
</head>
<body class="bg-gray-900 text-white font-sans">

<div id="app" class="p-6"></div>

<script>
/* ==== D√©finition des races ==== */
const RACES = {
    humans: {
        label: "Humains",
        buildings: {
            mine: {
                label: 'Mine',
                desc: 'Extrait des ressources',
                cost: (level) => ({ metal: 50 * (level+1), crystal: 30 * (level+1), energy: 0 }),
                time: 20,
                icon: '‚õèÔ∏è'
            },
            powerPlant: {
                label: 'Centrale √©lectrique',
                desc: 'G√©n√®re de l\'√©nergie',
                cost: (level) => ({ metal: 60 * (level+1), crystal: 40 * (level+1), energy: 0 }),
                time: 30,
                icon: '‚ö°'
            }
        },
        units: {
            soldier: {
                label: 'Soldat',
                cost: { metal: 10, crystal: 5, energy: 2 },
                time: 5,
                requires: 'mine',
                power: 1,
                icon: 'ü™ñ'
            },
            fighter: {
                label: 'Vaisseau l√©ger',
                cost: { metal: 100, crystal: 50, energy: 20 },
                time: 30,
                requires: 'powerPlant',
                power: 5,
                icon: 'üöÄ'
            }
        },
        technologies: {
            shields: {
                label: 'Boucliers',
                desc: '+10% r√©sistance par niveau',
                cost: (level) => ({ metal: 200 * (level+1), crystal: 150 * (level+1), energy: 100 * (level+1) }),
                time: 60,
                icon: 'üõ°Ô∏è'
            }
        },
        welcomeMsg: "Bienvenue, Commandant Humain. Base P3X-774 √©tablie."
    },
    xelarians: {
        label: "Xelariens",
        buildings: {
            crystalMine: {
                label: 'Mine de Cristal Xelarien',
                desc: 'Extrait du Cristal Xelarien et du Trinium',
                cost: (level) => ({ naquadah: Math.floor(50 * Math.pow(1.5, level)), trinium: Math.floor(40 * Math.pow(1.5, level)), energy: 0 }),
                time: 25,
                icon: 'üíé'
            },
            energySpire: {
                label: 'Pyl√¥ne d\'√ânergie',
                desc: 'G√©n√®re de l\'√©nergie Xelarienne',
                cost: (level) => ({ naquadah: Math.floor(60 * Math.pow(1.5, level)), trinium: Math.floor(30 * Math.pow(1.5, level)), energy: 0 }),
                time: 35,
                icon: '‚ö°'
            }
        },
        units: {
            xWarrior: {
                label: 'Guerrier Xelarien',
                cost: { naquadah: 15, trinium: 20, energy: 5 },
                time: 8,
                requires: 'crystalMine',
                power: 2,
                icon: 'üëΩ'
            },
            xFighter: {
                label: 'Vaisseau Xelarien',
                cost: { naquadah: 120, trinium: 80, energy: 40 },
                time: 40,
                requires: 'energySpire',
                power: 6,
                icon: 'üõ∏'
            }
        },
        technologies: {
            xShields: {
                label: 'Boucliers Xelariens',
                desc: '+15% r√©sistance par niveau',
                cost: (level) => ({ naquadah: Math.floor(250 * Math.pow(1.7, level)), trinium: Math.floor(200 * Math.pow(1.7, level)), energy: 120 * level }),
                time: 60,
                icon: 'üõ°Ô∏è'
            }
        },
        welcomeMsg: "Bienvenue, Commandant Xelarien. Base X-9 √©tablie."
    }
};

let selectedRace = null;

/* ==== √âtat du jeu ==== */
let gameState = {
    resources: {},
    buildings: {},
    military: {},
    technology: {},
    messages: []
};

/* ==== Choix de race ==== */
function chooseRaceUI() {
    const container = document.getElementById('app');
    container.innerHTML = `
        <div class="text-center mt-20 fade-in">
            <h1 class="text-4xl font-bold mb-6 text-white">Choisissez votre race</h1>
            ${Object.entries(RACES).map(([key, race]) => `
                <button 
                    class="m-4 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded font-bold text-lg"
                    onclick="selectRace('${key}')"
                >
                    ${race.label}
                </button>
            `).join('')}
        </div>
    `;
}

function selectRace(raceKey) {
    selectedRace = RACES[raceKey];

    // Initialise le jeu avec la race choisie
    gameState.buildings = Object.keys(selectedRace.buildings).reduce((acc, key) => { acc[key] = 0; return acc; }, {});
    gameState.military = Object.keys(selectedRace.units).reduce((acc, key) => { acc[key] = 0; return acc; }, {});
    gameState.technology = Object.keys(selectedRace.technologies).reduce((acc, key) => { acc[key] = 0; return acc; }, {});
    gameState.resources = {}; // vide pour l'exemple, √† remplir selon la race
    gameState.messages = [selectedRace.welcomeMsg];

    render();
}

/* ==== Rendu du jeu ==== */
function render() {
    const container = document.getElementById('app');
    const BUILDINGS_CURRENT = selectedRace.buildings;
    const UNITS_CURRENT = selectedRace.units;
    const TECHNOLOGIES_CURRENT = selectedRace.technologies;

    container.innerHTML = `
        <div class="fade-in">
            <h2 class="text-2xl font-bold mb-4">Messages</h2>
            <ul class="mb-6">
                ${gameState.messages.map(msg => `<li>üí¨ ${msg}</li>`).join('')}
            </ul>

            <h2 class="text-2xl font-bold mb-2">B√¢timents</h2>
            <div class="grid grid-cols-2 gap-4 mb-6">
                ${Object.entries(BUILDINGS_CURRENT).map(([key, b]) => `
                    <div class="p-4 bg-gray-800 rounded">
                        <h3 class="font-bold">${b.icon} ${b.label} (Niv ${gameState.buildings[key]})</h3>
                        <p>${b.desc}</p>
                        <button class="mt-2 px-3 py-1 bg-green-600 hover:bg-green-700 rounded" onclick="upgradeBuilding('${key}')">Construire / Am√©liorer</button>
                    </div>
                `).join('')}
            </div>

            <h2 class="text-2xl font-bold mb-2">Unit√©s</h2>
            <div class="grid grid-cols-2 gap-4 mb-6">
                ${Object.entries(UNITS_CURRENT).map(([key, u]) => `
                    <div class="p-4 bg-gray-800 rounded">
                        <h3 class="font-bold">${u.icon} ${u.label} (x${gameState.military[key]})</h3>
                        <button class="mt-2 px-3 py-1 bg-red-600 hover:bg-red-700 rounded" onclick="trainUnit('${key}')">Former</button>
                    </div>
                `).join('')}
            </div>

            <h2 class="text-2xl font-bold mb-2">Technologies</h2>
            <div class="grid grid-cols-2 gap-4 mb-6">
                ${Object.entries(TECHNOLOGIES_CURRENT).map(([key, t]) => `
                    <div class="p-4 bg-gray-800 rounded">
                        <h3 class="font-bold">${t.icon} ${t.label} (Niv ${gameState.technology[key]})</h3>
                        <p>${t.desc}</p>
                        <button class="mt-2 px-3 py-1 bg-yellow-600 hover:bg-yellow-700 rounded" onclick="researchTech('${key}')">Rechercher</button>
                    </div>
                `).join('')}
            </div>
        </div>
    `;
}

/* ==== Actions ==== */
function upgradeBuilding(key) {
    gameState.buildings[key]++;
    gameState.messages.push(`üèóÔ∏è ${selectedRace.buildings[key].label} am√©lior√© au niveau ${gameState.buildings[key]}`);
    render();
}

function trainUnit(key) {
    gameState.military[key]++;
    gameState.messages.push(`‚öîÔ∏è ${selectedRace.units[key].label} form√©. Total: ${gameState.military[key]}`);
    render();
}

function researchTech(key) {
    gameState.technology[key]++;
    gameState.messages.push(`üî¨ ${selectedRace.technologies[key].label} recherch√© au niveau ${gameState.technology[key]}`);
    render();
}

/* ==== D√©marrage ==== */
chooseRaceUI();

</script>
</body>
</html>
