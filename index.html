<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stargate Command - Jeu de Strat√©gie</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in { animation: fadeIn 0.3s ease-out; }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .pulse-animation { animation: pulse 2s infinite; }

        body {
            background: linear-gradient(to bottom, #0f172a, #020617);
            min-height: 100vh;
        }

        #raceSelectionOverlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 50;
        }
    </style>
</head>
<body class="text-white">
    <div id="raceSelectionOverlay" class="fade-in">
        <div class="bg-gray-900 p-8 rounded-lg border border-gray-700 text-center">
            <h2 class="text-2xl font-bold mb-4">Choisissez votre race</h2>
            <div class="flex gap-6 justify-center">
                <button id="chooseHuman" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded font-bold">
                    Humain üåç
                </button>
                <button id="chooseAlien" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded font-bold">
                    Alien üëΩ
                </button>
            </div>
        </div>
    </div>

    <div id="app" class="max-w-4xl mx-auto p-4"></div>

    <script>
        // =======================
        // CONSTANTES DE JEU
        // =======================
        const GAME_CONFIG = {
            PRODUCTION_RATES: {
                NAQUADAH_PER_MINE: 10,
                TRINIUM_PER_MINE: 5,
                ENERGY_PER_REACTOR: 50,
                STORAGE_PER_WAREHOUSE: 5000
            },
            MAX_QUEUE: 5,
            AUTOSAVE_INTERVAL: 10000,
            TICK_RATE: 1000
        };

        const BUILDINGS = {
            mine: {
                label: 'Mine de Naquadah',
                desc: 'Extrait du Naquadah et du Trinium',
                cost: (level) => ({
                    naquadah: Math.floor(60 * Math.pow(1.5, level)),
                    trinium: Math.floor(30 * Math.pow(1.5, level)),
                    energy: 0
                }),
                time: 30,
                icon: '‚õèÔ∏è'
            },
            reactor: {
                label: 'R√©acteur √† Naquadah',
                desc: 'G√©n√®re de l\'√©nergie',
                cost: (level) => ({
                    naquadah: Math.floor(75 * Math.pow(1.5, level)),
                    trinium: Math.floor(50 * Math.pow(1.5, level)),
                    energy: 0
                }),
                time: 40,
                icon: '‚ö°'
            },
            warehouse: {
                label: 'Entrep√¥t',
                desc: 'Augmente la capacit√© de stockage',
                cost: (level) => ({
                    naquadah: Math.floor(100 * Math.pow(1.4, level)),
                    trinium: Math.floor(80 * Math.pow(1.4, level)),
                    energy: 10
                }),
                time: 25,
                icon: 'üì¶'
            },
            barracks: {
                label: 'Caserne',
                desc: 'Entraine des soldats',
                cost: () => ({ naquadah: 200, trinium: 150, energy: 30 }),
                time: 35,
                icon: 'üéñÔ∏è'
            },
            shipyard: {
                label: 'Chantier Spatial',
                desc: 'Construit des vaisseaux',
                cost: () => ({ naquadah: 400, trinium: 200, energy: 50 }),
                time: 60,
                icon: 'üöÄ'
            },
            laboratory: {
                label: 'Laboratoire',
                desc: 'Recherche des technologies',
                cost: () => ({ naquadah: 300, trinium: 300, energy: 100 }),
                time: 50,
                icon: 'üî¨'
            }
        };

        const UNITS = {
            soldiers: {
                label: 'Soldats SG',
                cost: { naquadah: 20, trinium: 10, energy: 5 },
                time: 10,
                requires: 'barracks',
                power: 1,
                icon: 'ü™ñ'
            },
            fighters: {
                label: 'F-302',
                cost: { naquadah: 100, trinium: 80, energy: 30 },
                time: 30,
                requires: 'shipyard',
                power: 5,
                icon: '‚úàÔ∏è'
            },
            cruisers: {
                label: 'BC-304',
                cost: { naquadah: 500, trinium: 400, energy: 200 },
                time: 90,
                requires: 'shipyard',
                power: 20,
                icon: 'üõ∏'
            }
        };

        const TECHNOLOGIES = {
            weapons: {
                label: 'Armement',
                desc: '+10% d√©g√¢ts par niveau',
                cost: (level) => ({
                    naquadah: Math.floor(200 * Math.pow(1.8, level)),
                    trinium: Math.floor(200 * Math.pow(1.8, level)),
                    energy: 100 * level
                }),
                time: 60,
                icon: '‚öîÔ∏è'
            },
            shields: {
                label: 'Boucliers',
                desc: '+10% r√©sistance par niveau',
                cost: (level) => ({
                    naquadah: Math.floor(300 * Math.pow(1.8, level)),
                    trinium: Math.floor(150 * Math.pow(1.8, level)),
                    energy: 150 * level
                }),
                time: 70,
                icon: 'üõ°Ô∏è'
            },
            extraction: {
                label: 'Extraction',
                desc: '+10% production mines',
                cost: (level) => ({
                    naquadah: Math.floor(150 * Math.pow(1.6, level)),
                    trinium: Math.floor(150 * Math.pow(1.6, level)),
                    energy: 80 * level
                }),
                time: 50,
                icon: '‚öôÔ∏è'
            }
        };

        const MISSIONS = [
            {
                id: 'patrol',
                label: 'Patrouille',
                desc: 'S√©curiser le p√©rim√®tre',
                requirements: { soldiers: 5 },
                duration: 30,
                rewards: { naquadah: 100, trinium: 50, reputation: 5 },
                risk: 0.1,
                icon: 'üîç'
            },
            {
                id: 'reconnaissance',
                label: 'Reconnaissance Goa\'uld',
                desc: 'Espionner une base ennemie',
                requirements: { soldiers: 15, fighters: 1 },
                duration: 60,
                rewards: { naquadah: 250, trinium: 150, reputation: 15 },
                risk: 0.25,
                icon: 'üéØ'
            },
            {
                id: 'defense',
                label: 'D√©fense Plan√©taire',
                desc: 'Repousser une attaque',
                requirements: { soldiers: 30, fighters: 3, cruisers: 1 },
                duration: 90,
                rewards: { naquadah: 600, trinium: 400, reputation: 30 },
                risk: 0.35,
                icon: 'üõ°Ô∏è'
            }
        ];

        // =======================
        // √âTAT DU JEU
        // =======================
        class GameState {
            constructor(race='human') {
                this.race = race; // Race s√©lectionn√©e
                this.load();
            }

            getInitialState() {
                // Ressources et unit√©s de d√©part selon race
                if(this.race === 'alien'){
                    return {
                        resources: { naquadah: 800, trinium: 500, energy: 1200 },
                        buildings: { mine: 1, reactor: 1, warehouse: 1, barracks: 0, shipyard: 0, laboratory: 0 },
                        military: { soldiers: 5, fighters: 1, cruisers: 0 },
                        technology: { weapons: 1, shields: 1, extraction
